# **Database Schema for QuizNote**

## 1. **Users**
Stores user data and account information.

| Column Name     | Data Type        | Description                           |
|-----------------|------------------|---------------------------------------|
| user_id         | INT (Primary Key) | Unique ID for each user               |
| email           | VARCHAR(255)      | User's email, used for login          |
| first_name      | VARCHAR(100)      | User's first name                     |
| last_name       | VARCHAR(100)      | User's last name                      |
| signup_date     | TIMESTAMP         | Date of user registration             |
| subscription_tier| VARCHAR(50)      | Free, Premium, etc.                   |
| last_login      | TIMESTAMP         | Timestamp of the last login           |

### **Indexes**:
- **email** (Unique)

---

## 2. **Notes**
Stores user-uploaded notes and extracted text.

| Column Name     | Data Type         | Description                           |
|-----------------|-------------------|---------------------------------------|
| note_id         | INT (Primary Key)  | Unique ID for the note                |
| user_id         | INT (Foreign Key)  | References user_id in Users table     |
| note_title      | VARCHAR(255)       | Title of the uploaded note            |
| file_name       | VARCHAR(255)       | Name of the uploaded file             |
| file_path       | VARCHAR(255)       | Path to the uploaded file             |
| extracted_text  | TEXT               | Extracted text from the uploaded file |
| upload_date     | TIMESTAMP          | Date of note upload                   |

### **Indexes**:
- **user_id** (Foreign Key)

---

## 3. **Quizzes**
Stores information about quizzes generated from notes.

| Column Name     | Data Type         | Description                           |
|-----------------|-------------------|---------------------------------------|
| quiz_id         | INT (Primary Key)  | Unique ID for the quiz                |
| note_id         | INT (Foreign Key)  | References note_id in Notes table     |
| user_id         | INT (Foreign Key)  | References user_id in Users table     |
| quiz_date       | TIMESTAMP          | Date the quiz was generated           |
| total_questions | INT                | Total number of questions generated   |
| time_limit      | INT                | Time limit for the quiz (in seconds)  |

### **Indexes**:
- **user_id** (Foreign Key)
- **note_id** (Foreign Key)

---

## 4. **Questions**
Stores individual questions generated by the OpenAI API from user notes.

| Column Name     | Data Type         | Description                           |
|-----------------|-------------------|---------------------------------------|
| question_id     | INT (Primary Key)  | Unique ID for the question            |
| quiz_id         | INT (Foreign Key)  | References quiz_id in Quizzes table   |
| question_text   | TEXT               | Text of the question                  |
| question_type   | VARCHAR(50)        | Type of question (MCQ, True/False)    |

### **Indexes**:
- **quiz_id** (Foreign Key)

---

## 5. **answers**
Stores answer choices and correct answer for each question.

| Column Name     | Data Type         | Description                           |
|-----------------|-------------------|---------------------------------------|
| answer_id       | INT (Primary Key)  | Unique ID for the answer              |
| question_id     | INT (Foreign Key)  | References question_id in Questions   |
| answer_text     | TEXT               | Text of the answer choice             |
| is_correct      | BOOLEAN            | Marks if the answer is correct        |

### **Indexes**:
- **question_id** (Foreign Key)

---

## 6. **Quiz Results**
Stores the results of quiz attempts by users.

| Column Name     | Data Type         | Description                           |
|-----------------|-------------------|---------------------------------------|
| result_id       | INT (Primary Key)  | Unique ID for the quiz result         |
| quiz_id         | INT (Foreign Key)  | References quiz_id in Quizzes table   |
| user_id         | INT (Foreign Key)  | References user_id in Users table     |
| score           | INT                | Total score achieved by the user      |
| attempt_date    | TIMESTAMP          | Date and time the quiz was taken      |
| time_taken      | INT                | Total time taken to complete the quiz |
| feedback        | TEXT               | Personalized feedback after the quiz  |

### **Indexes**:
- **quiz_id** (Foreign Key)
- **user_id** (Foreign Key)

---

## 7. **Tags**
Stores tags associated with notes or quizzes for categorization.

| Column Name     | Data Type         | Description                           |
|-----------------|-------------------|---------------------------------------|
| tag_id          | INT (Primary Key)  | Unique ID for the tag                 |
| tag_name        | VARCHAR(50)        | Name of the tag (e.g., "Biology")     |

### **Note Tags**:
| Column Name     | Data Type         | Description                           |
|-----------------|-------------------|---------------------------------------|
| note_id         | INT (Foreign Key)  | References note_id in Notes           |
| tag_id          | INT (Foreign Key)  | References tag_id in Tags             |

### **Quiz Tags**:
| Column Name     | Data Type         | Description                           |
|-----------------|-------------------|---------------------------------------|
| quiz_id         | INT (Foreign Key)  | References quiz_id in Quizzes         |
| tag_id          | INT (Foreign Key)  | References tag_id in Tags             |

---

## 8. **Progress**
Tracks user performance over time for multiple quizzes.

| Column Name     | Data Type         | Description                           |
|-----------------|-------------------|---------------------------------------|
| progress_id     | INT (Primary Key)  | Unique ID for the progress record     |
| user_id         | INT (Foreign Key)  | References user_id in Users           |
| tag_id          | INT (Foreign Key)  | References tag_id in Tags (Subject)   |
| quiz_count      | INT                | Number of quizzes taken in that subject|
| average_score   | FLOAT              | Average score across quizzes          |
| last_attempt    | TIMESTAMP          | Date of last quiz attempt             |

### **Indexes**:
- **user_id** (Foreign Key)
- **tag_id** (Foreign Key)

---

# **Relationships**
1. **Users ↔ Notes**: A user can upload many notes, but each note belongs to only one user.
2. **Notes ↔ Quizzes**: A quiz is generated from a specific note, and a note can have multiple quizzes.
3. **Quizzes ↔ Questions**: A quiz can have many questions, but each question belongs to one quiz.
4. **Questions ↔ Answers**: Each question can have multiple answers, but only one is marked as correct.
5. **Users ↔ Quiz Results**: A user can have many quiz attempts, but each quiz result is tied to one user and one quiz.
6. **Tags ↔ Notes/Quizzes**: Tags can categorize multiple notes or quizzes, enabling better organization by topic or subject.
7. **Users ↔ Progress**: Tracks overall performance for users across specific tagged subjects.

---

### **Notes:**

- **Scalability**: 
  - The database can easily scale as new quizzes, questions, and results are generated.
  - Each quiz is uniquely tied to its corresponding note and user, ensuring no data overlap.
  
- **Data Integrity**: 
  - The foreign key relationships ensure that quizzes are linked to notes, and users’ attempts are correctly tracked.
  
- **Indexes**: 
  - The indexing on foreign keys will ensure efficient query performance, especially when fetching user progress or quiz history.

---

This schema is designed to be **modular** and **scalable**, with a focus on separating quizzes, questions, and results to track individual user performance and provide personalized feedback.

Does this structure fit with your vision for **QuizNote**? Would you like to tweak any parts of the database?
